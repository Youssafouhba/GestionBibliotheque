<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::div})}">
<head>
    <title>Historique des Emprunts</title>
</head>
<body>
<div>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2">Historique des Emprunts</h1>
        <div class="btn-group" role="group">
            <a th:href="@{/borrows/borrow}" class="btn btn-primary">
                <i class="fas fa-book"></i> Nouveau Prêt
            </a>
            <a th:href="@{/borrows/return}" class="btn btn-success">
                <i class="fas fa-undo"></i> Retour de Livre
            </a>
        </div>
    </div>

    <table class="table table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th>Étudiant</th>
            <th>Livre</th>
            <th>Date d'Emprunt</th>
            <th>Date de Retour</th>
            <th>Statut</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="borrow : ${borrows}">
            <td th:text="${borrow.student.name}"></td>
            <td th:text="${borrow.book.title}"></td>
            <td th:text="${#dates.format(borrow.borrowDate, 'dd/MM/yyyy HH:mm')}"></td>
            <td th:text="${borrow.returnDate != null ? #dates.format(borrow.returnDate, 'dd/MM/yyyy HH:mm') : 'Non retourné'}"></td>
            <td>
                        <span th:text="${borrow.returnDate != null ? 'Terminé' : 'En cours'}"
                              th:class="${borrow.returnDate != null ? 'badge bg-success' : 'badge bg-warning'}">
                        </span>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>